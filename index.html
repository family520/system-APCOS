<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>APCOS自检运营系统</title>
    <link rel="stylesheet" href="css/index.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/vue.min.js"></script>
</head>
<body>
<div id="app">
    <div class="header">
        <span class="title">APCOS服务自检运营系统</span>
        <div class="settingBox">
            <div class="inputBox" v-show="isSearchShow">
                <i></i>
                <input type="text" placeholder="搜索...">
            </div>
            <img class="searchImg" @click="isSearch()" :src="searchImgSrc" alt="">
            <img class="DImg" @click="ttShow()" :src="ttImg" alt="">
            <img class="fullScreenImg" @click="fullScreenImg()" :src="FullScreen" alt="">
            <img class="isShowImg" @click="isShowLeft()" :src="showLeft" alt="">
        </div>
    </div>
    <div class="contentBox">
        <div class="leftBox" v-show="isLeftShow">
            <div class="itemBox">
                <span class="iconBox"></span>
                <p class="titleBox">
                    <img src="img/icon001.png" alt="">
                    <span>数据中心总量/<span style="font-size: 0.08rem">TOTAL DATA CENTER</span></span>
                </p>
                <div id="EchartsOne" class="EchartsBox" style="height: 1.2rem;width: 4.2rem;margin: 0.1rem 0;"></div>
                <div class="textBox">
                    <div class="testItemBox">
                        <span><i style="background-color: #6EFFB5"></i>资源占有率: 25%</span>
                        <span><i style="background-color: #6EFFB5"></i>运行状态</span>
                    </div>
                    <div class="testItemBox">
                        <span><i style="background-color: #00FFFF"></i>资源占有率: 50%</span>
                        <span><i style="background-color: #00FFFF"></i>运行状态</span>
                    </div>
                    <div class="testItemBox">
                        <span><i style="background-color: #FD9D02"></i>资源占有率: 75%</span>
                        <span><i style="background-color: #FD9D02"></i>运行状态</span>
                    </div>
                </div>
            </div>
            <div class="itemBox">
                <span class="iconBox"></span>
                <p class="titleBox">
                    <img src="img/icon001.png" alt="">
                    <span>带宽统计/<span style="font-size: 0.08rem">DATA CENTER STATUS STATISTICS</span></span>
                </p>
                <p class="dwP">单位T</p>
                <div id="EchartsTwo" style="width: 4.2rem;height: 1.80rem;margin: 0.1rem 0;"></div>
            </div>
            <div class="itemBox">
                <span class="iconBox"></span>
                <p class="titleBox">
                    <img src="img/icon001.png" alt="">
                    <span>故障挂机率/<span style="font-size: 0.08rem">FAULT HANG RATE</span></span>
                </p>
                <div class="threeBox">
                    <div id="EchartsThree" style="width: 2.4rem;height: 2.4rem;margin: 0.1rem 0;"></div>
                    <div class="threeTest">
                        <div class="testItem">
                            <i style="background-color: #FD9D02"></i>
                            <span>
                                <span style="color: #FD9D02;font-size: 0.16rem">40%</span>
                                <br>
                                <span>1号服务器</span>
                            </span>
                        </div>
                        <div class="testItem">
                            <i style="background-color: #4AfeA3"></i>
                            <span>
                                <span style="color: #4AfeA3;font-size: 0.16rem">31%</span>
                                <br>
                                <span>2号服务器</span>
                            </span>
                        </div>
                        <div class="testItem">
                            <i style="background-color: #2A86F5"></i>
                            <span>
                                <span style="color: #2A86F5;font-size: 0.16rem">20%</span>
                                <br>
                                <span>3号服务器</span>
                            </span>
                        </div>
                        <div class="testItem">
                            <i style="background-color: #00FFFF"></i>
                            <span>
                                <span style="color: #00FFFF;font-size: 0.16rem">9%</span>
                                <br>
                                <span>4号服务器</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="centerBox">
            <div class="contItem" v-show="isContShow">
                <div style="width: 100%;height: 100%">2D页面</div>
            </div>
            <div class="contItem" v-show="!isContShow">
                <div id="two" style="width: 10rem;height: 9.6rem;"></div>
            </div>
        </div>
        <div class="rightBox">
            <div class="itemBox" style="height: 98%">
                <span class="iconBox"></span>
                <p class="titleBox">
                    <img src="img/icon001.png" alt="">
                    <span id="dataCenterName">数据中心详情/<span style="font-size: 0.08rem">DATA CENTER DETAILS</span></span>
                </p>
                <div class="contBox">
                    <p class="titleNav">承载能力</p>
                    <div class="czBox">
                        <div class="czItem">
                            <img src="img/icon-01.png" alt="">
                            <p>服务器数量</p>
                            <span>20万台</span>
                        </div>
                        <div class="czItem">
                            <img src="img/icon-02.png" alt="">
                            <p>交换机</p>
                            <span>1万台</span>
                        </div>
                        <div class="czItem">
                            <img src="img/icon-03.png" alt="">
                            <p>存储器</p>
                            <span>7万台</span>
                        </div>
                        <div class="czItem">
                            <img src="img/icon-04.png" alt="">
                            <p>资源占有率</p>
                            <span>70%</span>
                        </div>
                        <div class="czItem">
                            <img src="img/icon-05.png" alt="">
                            <p>宽带</p>
                            <span>21T</span>
                        </div>
                    </div>
                    <p class="titleNav">设备运行状况</p>
                    <div class="sbBox">
                        <div class="sbItem">
                            <i></i>
                            <span>运行设备:<span>10 万台</span></span>
                        </div>
                        <div class="sbItem">
                            <i></i>
                            <span>待机设备:<span>1 万台</span></span>
                        </div>
                        <div class="sbItem">
                            <i></i>
                            <span>故障设备:<span>0 台 </span></span>
                        </div>
                    </div>
                    <p class="titleNav">用户使用软件人数统计</p>
                    <div class="sbBox">
                        <div class="sbItem">
                            <i></i>
                            <span> 巡检人员:<span>金一二</span></span>
                        </div>
                        <div class="sbItem">
                            <i></i>
                            <span>巡检备注:<span>一切正常</span></span>
                        </div>
                        <div class="sbItem" style="width: 100%">
                            <i></i>
                            <span>今期巡检时间:<span>2018.6.18</span></span>
                        </div>
                    </div>
                    <p class="titleNav">管理人员</p>
                    <div class="infoBox">
                        <div class="imgBox">
                            <img src="img/userImg.png" alt="">
                        </div>
                        <div class="userBox">
                            <p>
                                <img src="img/userIcon.png" alt="">
                                <span class="userTest">曹登化</span>
                            </p>
                            <p>
                                <img src="img/telIcon.png" alt="">
                                <span class="userTest">13123548562</span>
                            </p>
                            <p>
                                <img src="img/homeIcon.png" alt="">
                                <span class="userTest">重庆研究院</span>
                            </p>
                            <p>
                                <span class="clName">以处理事项:</span>
                                <span class="jdBox">
                                    <span style="width: 60%;background-color: #0082FD;"></span>
                                </span>
                                <span class="number">65%</span>
                            </p>
                            <p>
                                <span class="clName">以处理事项:</span>
                                <span class="jdBox">
                                    <span style="width: 40%;background-color: #FD663F"></span>
                                </span>
                                <span class="number">40%</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="js/echars_4.4.0.min.js"></script>
<script src="js/echarts-liquidfill.min.js"></script>
<script src="js/echarts-gl.min.js"></script>
<script>
    let vm = new Vue({
        el: "#app",
        data() {
            return {
                isContShow: false,
                // isCont3DShow:false,
                isSearchShow: true,
                isLeftShow: true,
                searchImgSrc: "img/search.png",
                ttImg: "img/2-3D.png",
                FullScreen: "img/FullScreen.png",
                showLeft: "img/isShow.png"
            }
        },
        methods: {
            //是否显示搜索框
            isSearch() {
                this.isSearchShow = !this.isSearchShow;
                if (this.searchImgSrc === "img/search.png") {
                    this.searchImgSrc = "img/searchWhite.png";
                } else {
                    this.searchImgSrc = "img/search.png";
                }
            },
            // 是否显示左边
            isShowLeft() {
                this.isLeftShow = !this.isLeftShow;
                if (this.showLeft === "img/isShow.png") {
                    this.showLeft = "img/showBlue.png";
                } else {
                    this.showLeft = "img/isShow.png";
                }
            },
            //2D与3D切换
            ttShow() {
                this.isContShow = !this.isContShow;
                // this.isCont3DShow = !this.isCont3DShow;
            },
            //全屏显示与退出
            fullScreenImg() {
                if (this.FullScreen === "img/FullScreen.png") {
                    this.FullScreen = "img/fullBlue.png";
                } else {
                    this.FullScreen = "img/FullScreen.png";
                }
                let aaa = 1;
                if (aaa === 1) {
                    if (document.documentElement.RequestFullScreen) {
                        document.documentElement.RequestFullScreen();
                    }
                    //兼容火狐
                    console.log(document.documentElement.mozRequestFullScreen);
                    if (document.documentElement.mozRequestFullScreen) {
                        document.documentElement.mozRequestFullScreen();
                    }
                    //兼容谷歌等可以webkitRequestFullScreen也可以webkitRequestFullscreen
                    if (document.documentElement.webkitRequestFullScreen) {
                        document.documentElement.webkitRequestFullScreen();
                    }
                    //兼容IE,只能写msRequestFullscreen
                    if (document.documentElement.msRequestFullscreen) {
                        document.documentElement.msRequestFullscreen();
                    }
                    aaa = 0;
                }
                if (aaa === 0) {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.mozCancelFullScreen) {
                        document.mozCancelFullScreen();
                    } else if (document.webkitExitFullscreen) {
                        document.webkitExitFullscreen();
                    }
                    aaa = 1;
                }
            }
        }
    });
</script>
<!-- 左边Echarts---js -->
<script>
    $(function () {

        // 第一个Echarts图
        EchartsOne("EchartsOne");

        function EchartsOne(name) {
            // 基于准备好的dom，初始化echarts实例
            let myChart = echarts.init(document.getElementById(name));

            let dataStyle = {
                normal: {
                    label: {
                        show: false
                    },
                    labelLine: {
                        show: false
                    },
                    shadowBlur: 0,
                    shadowColor: '#203665'
                }
            };
            option = {
                // backgroundColor: "#20263f",
                series: [{
                    name: '第一个圆环',
                    type: 'pie',
                    clockWise: false,
                    radius: [30, 45],
                    itemStyle: dataStyle,
                    hoverAnimation: false,
                    center: ['15%', '50%'],
                    data: [{
                        value: 25,
                        label: {
                            normal: {
                                rich: {
                                    a: {
                                        color: '#3a7ad5',
                                        align: 'center',
                                        fontSize: 20,
                                        fontWeight: "bold"
                                    },
                                    b: {
                                        color: '#fff',
                                        align: 'center',
                                        fontSize: 16
                                    }
                                },
                                formatter: function (params) {
                                    return "北京数据\n\n" + "中心";
                                },
                                position: 'center',
                                show: true,
                                textStyle: {
                                    fontSize: '10',
                                    fontWeight: 'normal',
                                    color: '#fff'
                                }
                            }
                        },
                        itemStyle: {
                            normal: {
                                color: '#6EFFB5',
                                shadowColor: '#6EFFB5',
                                shadowBlur: 0
                            }
                        }
                    }, {
                        value: 75,
                        name: 'invisible',
                        itemStyle: {
                            normal: {
                                color: '#333347'
                            },
                            emphasis: {
                                color: '#333347'
                            }
                        }
                    }]
                }, {
                    name: '第二个圆环',
                    type: 'pie',
                    clockWise: false,
                    radius: [30, 45],
                    itemStyle: dataStyle,
                    hoverAnimation: false,
                    center: ['50%', '50%'],
                    data: [{
                        value: 50,
                        label: {
                            normal: {
                                rich: {
                                    a: {
                                        color: '#d03e93',
                                        align: 'center',
                                        fontSize: 20,
                                        fontWeight: "bold"
                                    },
                                    b: {
                                        color: '#fff',
                                        align: 'center',
                                        fontSize: 16
                                    }
                                },
                                formatter: function (params) {
                                    return "重庆数据\n\n" + "中心";
                                },
                                position: 'center',
                                show: true,
                                textStyle: {
                                    fontSize: '10',
                                    fontWeight: 'normal',
                                    color: '#fff'
                                }
                            }
                        },
                        itemStyle: {
                            normal: {
                                color: '#00FFFF',
                                shadowColor: '#00FFFF',
                                shadowBlur: 0
                            }
                        }
                    }, {
                        value: 50,
                        name: 'invisible',
                        itemStyle: {
                            normal: {
                                color: '#333347'
                            },
                            emphasis: {
                                color: '#333347'
                            }
                        }
                    }]
                }, {
                    name: '第三个圆环',
                    type: 'pie',
                    clockWise: false,
                    radius: [30, 45],
                    itemStyle: dataStyle,
                    hoverAnimation: false,
                    center: ['85%', '50%'],
                    data: [{
                        value: 75,
                        label: {
                            normal: {
                                rich: {
                                    a: {
                                        color: '#603dd0',
                                        align: 'center',
                                        fontSize: 20,
                                        fontWeight: "bold"
                                    },
                                    b: {
                                        color: '#fff',
                                        align: 'center',
                                        fontSize: 16
                                    }
                                },
                                formatter: function (params) {
                                    return "深圳数据\n\n" + "中心";
                                },
                                position: 'center',
                                show: true,
                                textStyle: {
                                    fontSize: '10',
                                    fontWeight: 'normal',
                                    color: '#fff'
                                }
                            }
                        },
                        itemStyle: {
                            normal: {
                                color: '#FD9D02',
                                shadowColor: '#FD9D02',
                                shadowBlur: 0
                            }
                        }
                    }, {
                        value: 25,
                        name: 'invisible',
                        itemStyle: {
                            normal: {
                                color: '#333347'
                            },
                            emphasis: {
                                color: '#333347'
                            }
                        }
                    }]
                }]
            };

            // 使用刚指定的配置项和数据显示图表。
            myChart.setOption(option);
            //根据窗口的大小变动图表 --- 重点
            window.onresize = function () {
                myChart.resize();
            }
        }

        // 第二个Echarts图
        EchartsTwo("EchartsTwo");

        function EchartsTwo(name) {
            let myChartTwo = echarts.init(document.getElementById(name));

            option = {
                grid: {
                    top: '20%',
                    left: '10%',
                    right: '10%',
                    bottom: '15%',
                    containLabel: true,
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: ['', '04:00', '08:00', '12:00', '16:00', '20:00', ''],
                    axisLine: {
                        show: false,
                        color: '#ffffff63'
                    },
                    axisTick: {
                        show: true,
                        length: 25,
                        lineStyle: {
                            color: "#ffffff1f"
                        }
                    },
                    splitLine: {
                        show: true,
                        lineStyle: {
                            color: '#ffffff1f'
                        }
                    },
                    axisLabel: {
                        // margin: 20,
                        color: '#ffffff63'
                    },
                },
                yAxis: [{
                    type: 'value',
                    position: 'left',
                    axisLabel: {
                        // margin: 20,
                        color: '#ffffff63'
                    },

                    axisTick: {
                        show: true,
                        length: 15,
                        lineStyle: {
                            color: "#ffffff1f",
                        }
                    },
                    splitLine: {
                        // show: true,
                        lineStyle: {
                            color: '#ffffff1f'
                        }
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#fff',
                            width: 2
                        }
                    }
                }],
                series: [{
                    name: '注册总量',
                    type: 'line',
                    smooth: true, //是否平滑曲线显示
                    showAllSymbol: true,
                    symbol: 'circle',
                    symbolSize: 6,
                    lineStyle: {
                        normal: {
                            color: "#00FFFF", // 线条颜色
                        },
                    },
                    label: {
                        show: true,
                        position: 'top',
                        textStyle: {
                            color: '#00FFFF',
                        }
                    },
                    itemStyle: {
                        color: "red",
                        borderColor: "#00FFFF",
                        borderWidth: 3
                    },
                    tooltip: {
                        show: false
                    },
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: '#00ffff'
                            },
                                {
                                    offset: 1,
                                    color: '#06061E'
                                }
                            ], false),
                        }
                    },
                    data: [5, 15, 30, 25, 15, 10, 15,]
                }]
            };
            // 使用刚指定的配置项和数据显示图表。
            myChartTwo.setOption(option);
            //根据窗口的大小变动图表 --- 重点
            window.onresize = function () {
                myChartTwo.resize();
            }
        }

        // 第三个Echarts图
        EchartsThree("EchartsThree");

        function EchartsThree(name) {
            let myChartThree = echarts.init(document.getElementById(name));
            option = {
                series: [
                    {
                        name: '访问来源',
                        type: 'pie',
                        radius: ['50%', '70%'],
                        avoidLabelOverlap: true,
                        color: ['#FD9D02', '#4AfeA3', '#2A86F5', '#00FFFF'],
                        label: {
                            normal: {
                                show: false,
                                position: 'center',
                            },
                            emphasis: {
                                show: true,
                                textStyle: {
                                    fontSize: '14',
                                    fontWeight: 'bold'
                                }
                            }
                        },
                        labelLine: {
                            normal: {
                                show: false
                            }
                        },
                        data: [
                            {value: "40", name: '1号服务器'},
                            {value: "31", name: '2号服务器'},
                            {value: "20", name: '3号服务器'},
                            {value: "9", name: '4号服务器'},
                        ]
                    }
                ]
            };
            myChartThree.setOption(option);
            //根据窗口的大小变动图表 --- 重点
            window.onresize = function () {
                myChartThree.resize();
            }
        }

    });


</script>
<!-- 中间Map -->
<script>
    var myChart = echarts.init(document.getElementById('two'));

    $.getJSON('json/flights.json', function (data) {

        // 造数据函数
        // 参数 （地球上点的数组、点球上飞线数组、点的个数)
        // 返回  [地球上的点,飞线]
        function getScatterOption(ScatterOption, line, length) {

            for (let i = 0; i < length; i++) {
                let noramlAirports = data.airports[parseInt(Math.random() * 8000)];
                //点
                ScatterOption.push({

                    // name: noramlAirports[0] + '数据中心',
                    name: noramlAirports[0],
                    value: [noramlAirports[3], noramlAirports[4]],

                });
                // 飞线

                if (i == 0) {
                    line.push(
                        [
                            [114.05, 22.55],
                            [noramlAirports[3], noramlAirports[4]]
                        ])

                } else {
                    line.push(
                        [
                            line[i - 1][1],
                            [noramlAirports[3], noramlAirports[4]]
                        ])

                }


            }

            // console.log('arr:', arr)

            return [ScatterOption, line];

        }

        // 定义地球的点
        let normalScatterOption = [
            {

                name: 'BeiJing',
                value: [116.46, 39.92]
            },
            {
                name: 'Chongqing',
                value: [106.55, 29.57]
            },
            {
                name: 'Shenzhen',
                value: [114.05, 22.55],
            }
        ];   //正常运行
        let freeScatterOption = [];        //空闲
        let congestScatterOption = [];     //拥堵
        let hitchScatterOption = [];       //故障

        // 定义地球的飞线
        let normalLine3D = [
            [
                [116.46, 39.92], //北京到重庆
                [106.55, 29.57]
            ],
            [
                [116.46, 39.92],//北京到深圳
                [114.05, 22.55]
            ],
            [
                [106.55, 29.57],//重庆到深圳
                [114.05, 22.55]
            ]
        ]
        let freeLine3D = [];
        let congestLine3D = [];
        let hitchLine3D = [];


        let normal = getScatterOption(normalScatterOption, normalLine3D, 80);
        normalScatterOption = normal[0]; //点
        normalLine3D = normal[1];        //线
        let free = getScatterOption(freeScatterOption, freeLine3D, 10);
        freeScatterOption = free[0];    //点
        freeLine3D = free[1];           //线
        let congest = getScatterOption(congestScatterOption, congestLine3D, 5);
        congestScatterOption = congest[0];//点
        congestLine3D = congest[1];       //线
        let hitch = getScatterOption(hitchScatterOption, hitchLine3D, 5);
        hitchScatterOption = hitch[0];    //点
        hitchLine3D = hitch[1];           //线

        let series = [
            //地球上的点
            {
                type: 'scatter3D',
                name: "正常",
                coordinateSystem: 'globe',
                blendMode: 'lighter',
                symbolSize: 10,
                distance : 10000,
                // symbol : "circle",
                label: {
                    show: true,
                    position : "bottom",
                    formatter: '{b}',
                    // itemStyle: {
                    //     color: "#363FFF", //颜色
                    //     opacity: 1,
                    // },

                    textStyle: {
                        color: '#fff',
                        fontSize: 14,
                        backgroundColor : "transparent"
                    },
                },
                symbol: 'path://M512 123.19c-19.73 0-39.47 3.71-54.46 11.21L140.06 293.15c-30 15-30 39.48 0 54.46l317.45 158.76c15.05 7.49 34.79 11.21 54.52 11.21s39.48-3.72 54.46-11.21L884 347.61c30-15 30-39.47 0-54.46L566.49 134.4c-15-7.5-34.72-11.21-54.46-11.21z m0 588.36c-24.36 0-48.67-4.87-68.1-14.56L132.87 541.52A30.48 30.48 0 0 1 160.16 487l311 155.53c21.44 10.72 60.31 10.72 81.75 0L863.9 487a30.47 30.47 0 0 1 27.24 54.52L580.14 697A155.78 155.78 0 0 1 512 711.55z m0 188.85c-24.36 0-48.67-4.87-68.1-14.56l-311-155.53a30.44 30.44 0 1 1 27.23-54.46l311 155.53c21.44 10.72 60.31 10.72 81.75 0l311-155.53a30.47 30.47 0 1 1 27.24 54.52l-311 155.47c-19.41 9.75-43.72 14.56-68.12 14.56z',
                itemStyle: {
                    color: '#363FFF',
                    opacity: 1,
                },
                data: normalScatterOption

            },
            {
                type: 'scatter3D',
                name: "空闲",
                coordinateSystem: 'globe',
                blendMode: 'lighter',
                symbolSize: 10,
                symbol: 'path://M512 123.19c-19.73 0-39.47 3.71-54.46 11.21L140.06 293.15c-30 15-30 39.48 0 54.46l317.45 158.76c15.05 7.49 34.79 11.21 54.52 11.21s39.48-3.72 54.46-11.21L884 347.61c30-15 30-39.47 0-54.46L566.49 134.4c-15-7.5-34.72-11.21-54.46-11.21z m0 588.36c-24.36 0-48.67-4.87-68.1-14.56L132.87 541.52A30.48 30.48 0 0 1 160.16 487l311 155.53c21.44 10.72 60.31 10.72 81.75 0L863.9 487a30.47 30.47 0 0 1 27.24 54.52L580.14 697A155.78 155.78 0 0 1 512 711.55z m0 188.85c-24.36 0-48.67-4.87-68.1-14.56l-311-155.53a30.44 30.44 0 1 1 27.23-54.46l311 155.53c21.44 10.72 60.31 10.72 81.75 0l311-155.53a30.47 30.47 0 1 1 27.24 54.52l-311 155.47c-19.41 9.75-43.72 14.56-68.12 14.56z',
                itemStyle: {
                    color: '#00A29A',
                    opacity: 1,
                },
                label: {
                    show: true,
                    formatter: '{b}',
                    itemStyle: {
                        color: "#363FFF", //颜色
                        opacity: 1,
                    },

                    textStyle: {
                        color: '#fff',
                        fontSize: 18,
                        backgroundColor : "transparent"
                    },
                },
                data: freeScatterOption

            },
            {
                type: 'scatter3D',
                name: "拥堵",
                coordinateSystem: 'globe',
                blendMode: 'lighter',
                symbolSize: 10,

                itemStyle: {
                    color: '#F39800',
                    opacity: 1
                },
                symbol: 'path://M512 123.19c-19.73 0-39.47 3.71-54.46 11.21L140.06 293.15c-30 15-30 39.48 0 54.46l317.45 158.76c15.05 7.49 34.79 11.21 54.52 11.21s39.48-3.72 54.46-11.21L884 347.61c30-15 30-39.47 0-54.46L566.49 134.4c-15-7.5-34.72-11.21-54.46-11.21z m0 588.36c-24.36 0-48.67-4.87-68.1-14.56L132.87 541.52A30.48 30.48 0 0 1 160.16 487l311 155.53c21.44 10.72 60.31 10.72 81.75 0L863.9 487a30.47 30.47 0 0 1 27.24 54.52L580.14 697A155.78 155.78 0 0 1 512 711.55z m0 188.85c-24.36 0-48.67-4.87-68.1-14.56l-311-155.53a30.44 30.44 0 1 1 27.23-54.46l311 155.53c21.44 10.72 60.31 10.72 81.75 0l311-155.53a30.47 30.47 0 1 1 27.24 54.52l-311 155.47c-19.41 9.75-43.72 14.56-68.12 14.56z',
                label: {
                    show: true,
                    formatter: '{b}',
                    itemStyle: {
                        color: "#363FFF", //颜色
                        opacity: 1,
                    },

                    textStyle: {
                        color: '#fff',
                        fontSize: 18,
                        backgroundColor : "transparent"
                    },
                },
                data: congestScatterOption
            },
            {
                type: 'scatter3D',
                name: "故障",
                coordinateSystem: 'globe',
                blendMode: 'lighter',
                symbolSize: 10,

                itemStyle: {
                    color: '#C30D23',
                    opacity: 1
                },
                symbol: 'path://M512 123.19c-19.73 0-39.47 3.71-54.46 11.21L140.06 293.15c-30 15-30 39.48 0 54.46l317.45 158.76c15.05 7.49 34.79 11.21 54.52 11.21s39.48-3.72 54.46-11.21L884 347.61c30-15 30-39.47 0-54.46L566.49 134.4c-15-7.5-34.72-11.21-54.46-11.21z m0 588.36c-24.36 0-48.67-4.87-68.1-14.56L132.87 541.52A30.48 30.48 0 0 1 160.16 487l311 155.53c21.44 10.72 60.31 10.72 81.75 0L863.9 487a30.47 30.47 0 0 1 27.24 54.52L580.14 697A155.78 155.78 0 0 1 512 711.55z m0 188.85c-24.36 0-48.67-4.87-68.1-14.56l-311-155.53a30.44 30.44 0 1 1 27.23-54.46l311 155.53c21.44 10.72 60.31 10.72 81.75 0l311-155.53a30.47 30.47 0 1 1 27.24 54.52l-311 155.47c-19.41 9.75-43.72 14.56-68.12 14.56z',
                label: {
                    show: true,
                    formatter: '{b}',
                    itemStyle: {
                        color: "#363FFF", //颜色
                        opacity: 1,
                    },

                    textStyle: {
                        color: '#fff',
                        fontSize: 18,
                        backgroundColor : "transparent"
                    },
                },
                data: hitchScatterOption
            },
            //飞线
            {

                type: 'lines3D',
                name: "正常",
                effect: {
                    show: true,
                    trailWidth: 2,
                    trailLength: 0.15,
                    trailOpacity: 1,
                    trailColor: 'rgb(30, 30, 60)'
                },

                lineStyle: {
                    width: 1,
                    color: 'rgb(50, 50, 150)',
                    // color: 'rgb(118, 233, 241)',
                    opacity: 0.1
                },
                blendMode: 'lighter',

                data: normalLine3D
            },
            {

                type: 'lines3D',
                name: "空闲",
                effect: {
                    show: true,
                    trailWidth: 2,
                    trailLength: 0.15,
                    trailOpacity: 1,
                    trailColor: 'rgb(30, 30, 60)'
                },

                lineStyle: {
                    width: 1,
                    color: 'rgb(50, 50, 150)',
                    // color: 'rgb(118, 233, 241)',
                    opacity: 0.1
                },
                blendMode: 'lighter',

                data: freeLine3D
            },
            {

                type: 'lines3D',
                name: "拥堵",
                effect: {
                    show: true,
                    trailWidth: 2,
                    trailLength: 0.15,
                    trailOpacity: 1,
                    trailColor: 'rgb(30, 30, 60)'
                },

                lineStyle: {
                    width: 1,
                    color: 'rgb(50, 50, 150)',
                    // color: 'rgb(118, 233, 241)',
                    opacity: 0.1
                },
                blendMode: 'lighter',

                data: congestLine3D
            },
            {

                type: 'lines3D',
                name: "故障",
                effect: {
                    show: true,
                    trailWidth: 2,
                    trailLength: 0.15,
                    trailOpacity: 1,
                    trailColor: 'rgb(30, 30, 60)'
                },

                lineStyle: {
                    width: 1,
                    color: 'rgb(50, 50, 150)',
                    // color: 'rgb(118, 233, 241)',
                    opacity: 0.1
                },
                blendMode: 'lighter',

                data: hitchLine3D
            }
        ];

        // console.log(series);

        let option = {
            legend: {
                selectedMode: 'false',
                left: 'center',
                top: "20",
                data: ["正常", "空闲", "拥堵", "故障"],
                orient: 'horizontal',
                textStyle: {
                    color: '#fff'
                }
            },
            globe: {

                environment: 'img/starfield.jpg',

                heightTexture: 'img/bathymetry_bw_composite_4k.jpg',

                displacementScale: 0.1,
                displacementQuality: 'high',

                baseColor: '#000',

                shading: 'realistic',
                realisticMaterial: {
                    roughness: 0.2,
                    metalness: 0
                },

                postEffect: {
                    enable: true,
                    depthOfField: {
                        enable: false,
                        focalDistance: 150
                    }
                },
                temporalSuperSampling: {
                    enable: true
                },
                light: {
                    ambient: {
                        intensity: 0
                    },
                    main: {
                        intensity: 0.1,
                        shadow: false
                    },
                    ambientCubemap: {
                        texture: 'img/lake.hdr',
                        exposure: 1,
                        diffuseIntensity: 0.5,
                        specularIntensity: 2
                    }
                },
                viewControl: {
                    autoRotate: false,
                    autoRotateSpeed: 5,
                    distance: 230,
                    targetCoord: [116.46, 39.92],
                    zoomSensitivity : 3,
                },
                silent: true
            },
            dataset: {
                source: [
                    // 有了上面 dimensions 定义后，下面这五个维度的名称分别为：
                    ['date', 'open', 'close', 'highest', 'lowest']
                    [12, 44, 55, 66, 2],
                    [23, 6, 16, 23, 1],
                ]
            },
            series: series
        }

        myChart.setOption(option);

        // window.addEventListener('keydown', function () {
        //     series.forEach(function (series, idx) {
        //         myChart.dispatchAction({
        //             type: 'lines3DToggleEffect',
        //             seriesIndex: idx
        //         });
        //     })
        // });

        //改变右侧数据
        // myChart.on('click', function (params){
        //     // console.log('params:', params.data.name)
        //     // console.log(option.globe.viewControl.targetCoord);
        //     option.globe.viewControl.targetCoord = [106.55, 29.57];
        //     myChart.setOption(option,true)
        //     // $("#dataCenterName").
        // })
    });


</script>
</body>
</html>